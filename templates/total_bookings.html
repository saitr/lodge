{% extends 'base.html' %}

{% block content %}
  <h1 class="p-2 m-5 text-decoration-underline text-center">Total Bookings</h1>

  <div class="table-responsive">
    {% if bookings %}
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th style="font-weight: bold; font-family: Arial, sans-serif; text-align: center; font-size: 16px;">Name</th>
            <th style="font-weight: bold; font-family: Arial, sans-serif; text-align: center; font-size: 16px;">Phone Number</th>
            <th style="font-weight: bold; font-family: Arial, sans-serif; text-align: center; font-size: 16px;">Room Number</th>
            <th style="font-weight: bold; font-family: Arial, sans-serif; text-align: center; font-size: 16px;">Check In</th>
            <th style="font-weight: bold; font-family: Arial, sans-serif; text-align: center; font-size: 16px;">Check Out</th>
          </tr>
        </thead>
        <tbody>
          {% for booking in bookings %}
            <tr>
              <td style="font-family: Arial, sans-serif; text-align: center; font-size: 14px;">{{ booking.user.username }}</td>
              <td style="font-family: Arial, sans-serif; text-align: center; font-size: 14px;">{{ booking.user.phone_number }}</td>
              <td style="font-family: Arial, sans-serif; text-align: center; font-size: 14px;">{{ booking.room_chosen.number_var }}</td>
              <td style="font-family: Arial, sans-serif; text-align: center; font-size: 14px;">
                {% if booking.check_in %}
                  Checked In: {{ booking.check_in_date_time }}
                {% elif request.user.is_superuser %}
                  <form action="{% url 'check_in' booking.id %}" method="POST">
                    {% csrf_token %}
                    <button class="btn btn-primary" type="submit">Check In</button>
                  </form>
                {% endif %}
              </td>
              <td style="font-family: Arial, sans-serif; text-align: center; font-size: 14px;">
                {% if booking.check_out %}
                  Checked Out: {{ booking.check_out_date_time }}
                {% elif request.user.is_superuser and booking.check_in %}
                  <form action="{% url 'check_out' booking.id %}" method="POST">
                    {% csrf_token %}
                    <button class="btn btn-success" type="submit">Check Out</button>
                  </form>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <p>No bookings found.</p>
    {% endif %}
  </div>

  <div class="text-center p-2">
    <a href="{% url 'room_list'%}">
      <button class="btn btn-dark">Back To Home</button>
    </a>
  </div>
{% endblock %}



